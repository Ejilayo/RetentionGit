PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE SYSRUN(ID INTEGER PRIMARY KEY AUTOINCREMENT,RUNDATE TEXT);
INSERT INTO "SYSRUN" VALUES(1,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(2,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(3,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(4,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(5,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(6,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(7,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(8,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(9,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(10,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(11,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(12,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(13,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(14,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(15,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(16,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(17,'2014-8-10');
INSERT INTO "SYSRUN" VALUES(18,'2014-8-11');
INSERT INTO "SYSRUN" VALUES(19,'2014-8-11');
INSERT INTO "SYSRUN" VALUES(20,'2014-8-12');
INSERT INTO "SYSRUN" VALUES(21,'2014-8-12');
INSERT INTO "SYSRUN" VALUES(22,'2014-8-12');
INSERT INTO "SYSRUN" VALUES(23,'2014-8-12');
CREATE TABLE USER (ID INTEGER PRIMARY KEY AUTOINCREMENT,USERNAME TEXT COLLATE NOCASE UNIQUE);
INSERT INTO "USER" VALUES(1,'Ejilayomi');
INSERT INTO "USER" VALUES(2,'Mimiko');
INSERT INTO "USER" VALUES(3,'Bird');
CREATE TABLE QUESTION (ID TEXT COLLATE NOCASE PRIMARY KEY NOT NULL,WORDING TEXT,DATECREATED TEXT,DATE MODIFIED TEXT);
INSERT INTO "QUESTION" VALUES('1','What Course','2014-8-13','2014-8-13');
INSERT INTO "QUESTION" VALUES('2','Is this','2014-8-13','2014-8-13');
CREATE TABLE SUBJECT(ID TEXT COLLATE NOCASE PRIMARY KEY,DESCRIPTION TEXT COLLATE NOCASE,CREATORID INTEGER,FOREIGN KEY (CREATORID) REFERENCES USER(ID) ON UPDATE CASCADE ON DELETE SET NULL);
INSERT INTO "SUBJECT" VALUES('CMPT365','COMPUTER MULTIMEDIA','NULL');
CREATE TABLE TEST(ID TEXT COLLATE NOCASE PRIMARY KEY,DATECREATED TEXT,SUBJECTID TEXT,CREATORID INTEGER,FOREIGN KEY (SUBJECTID) REFERENCES SUBJECT(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (CREATORID) REFERENCES USER(ID) ON UPDATE CASCADE ON DELETE SET NULL);
CREATE TABLE POTWORD(ID INTEGER PRIMARY KEY,WORD TEXT COLLATE NOCASE UNIQUE);
INSERT INTO "POTWORD" VALUES(1,'True');
INSERT INTO "POTWORD" VALUES(2,'False');
INSERT INTO "POTWORD" VALUES(3,'Multi');
INSERT INTO "POTWORD" VALUES(4,'Media');
CREATE TABLE USERSTATS(USERID INTEGER,TESTID TEXT COLLATE NOCASE,SUBJECTID TEXT COLLATE NOCASE,SCORE REAL,TOTALQUESTIONNUM INTEGER,PRIMARY KEY (USERID, TESTID, SUBJECTID),FOREIGN KEY (USERID) REFERENCES USER(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (TESTID) REFERENCES TEST(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (SUBJECTID) REFERENCES SUBJECT(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE QUESTIONSUBJECT(SUBJECTID TEXT COLLATE NOCASE,QUESTIONID TEXT COLLATE NOCASE,PRIMARY KEY (SUBJECTID,QUESTIONID),FOREIGN KEY (SUBJECTID) REFERENCES SUBJECT(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE QUESTIONIMAGE(QUESTIONID TEXT COLLATE NOCASE,IMAGEPATH TEXT,FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE QUESTIONANSWER(QUESTIONID TEXT COLLATE NOCASE,ANSWERID INTEGER,PRIMARY KEY (QUESTIONID,ANSWERID),FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY (ANSWERID) REFERENCES POTWORD(ID) ON UPDATE CASCADE ON DELETE RESTRICT);
INSERT INTO "QUESTIONANSWER" VALUES('1',3);
INSERT INTO "QUESTIONANSWER" VALUES('1',4);
INSERT INTO "QUESTIONANSWER" VALUES('2',4);
CREATE TABLE QUESTIONDETAILS(QUESTIONID TEXT COLLATE NOCASE PRIMARY KEY,TYPE INTEGER,DECOYS INTEGER,POT INTEGER,IMAGES INTEGER,FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE);
INSERT INTO "QUESTIONDETAILS" VALUES('1',1,0,0,0);
INSERT INTO "QUESTIONDETAILS" VALUES('2',1,0,0,0);
CREATE TABLE QUESTIONDECOYS(QUESTIONID TEXT COLLATE NOCASE,DECOYID INTEGER,PRIMARY KEY (QUESTIONID,DECOYID),FOREIGN KEY (DECOYID) REFERENCES POT(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE SUBJECTPOT(SUBJECTID TEXT COLLATE NOCASE,WORDID INTEGER,PRIMARY KEY (SUBJECTID, WORDID),FOREIGN KEY (SUBJECTID) REFERENCES SUBJECT(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (WORDID) REFERENCES POT(ID) ON UPDATE CASCADE ON DELETE CASCADE);
INSERT INTO "SUBJECTPOT" VALUES('cmpt365',3);
INSERT INTO "SUBJECTPOT" VALUES('cmpt365',4);
CREATE TABLE TESTQUESTIONS(TESTID TEXT COLLATE NOCASE,QUESTIONID TEXT COLLATE NOCASE,PRIMARY KEY (TESTID,QUESTIONID),FOREIGN KEY (TESTID) REFERENCES TEST(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (QUESTIONID) REFERENCES QUESTION(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE TESTOPTIONDATES(TESTID TEXT COLLATE NOCASE PRIMARY KEY,BETWEENDATE STRING,ANDDATE STRING,FOREIGN KEY (TESTID) REFERENCES TEST(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE TESTOPTIONAUTHORS(TESTID TEXT COLLATE NOCASE PRIMARY KEY,AUTHORID INTEGER, FOREIGN KEY (TESTID) REFERENCES TEST(ID) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY (AUTHORID) REFERENCES USER(ID) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE TESTOPTIONTYPES(TESTID TEXT COLLATE NOCASE,TYPE INTEGER,PRIMARY KEY (TESTID,TYPE),FOREIGN KEY (TESTID) REFERENCES TEST(ID) ON UPDATE CASCADE ON DELETE CASCADE);
DELETE FROM sqlite_sequence;
INSERT INTO "sqlite_sequence" VALUES('SYSRUN',23);
INSERT INTO "sqlite_sequence" VALUES('USER',3);
COMMIT;
